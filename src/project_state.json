{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 15,
  "summary": "Mobile-first, SEO-optimized cultural/traditional cuisine website for Ini-Abasi Restaurant and Outdoor Services featuring African & continental dishes, pastries, natural drinks, and event catering, with specified branding and key site pages plus Google Maps/local search optimization, and a full SUPER-ADMIN/OWNER dashboard that gives the restaurant owner unrestricted control over site content/settings without changing the public site design.",
  "architectural_notes": [
    "Mobile-first responsive layout as a primary requirement",
    "Local SEO focus including Google Maps integration/optimization",
    "Design system: warm green/beige/red accents; serif headings + sans-serif body typography",
    "Site IA includes Home, Menu, Gallery, About, Contact, Order/Reserve",
    "Add a separate SUPER-ADMIN/OWNER admin panel that does not alter the public site UI.",
    "No vendor lock-in: owner must be able to export/backup all website data and retain full access control (cannot be locked out).",
    "Admin authorization system appears to rely on modules (e.g., authorization/MixinAuthorization and authorization/access-control) imported by main.mo; if these modules are missing, admin checks/bootstrapping cannot function and will always deny access.",
    "Consider restricting first-time SUPER-ADMIN/owner bootstrap behind a shared access code/secret (admin token) rather than auto-granting the first authenticated principal."
  ],
  "known_issues": [
    "Admin dashboard shows 'Access Denied' after attempted Internet Identity login; initial owner/super-admin bootstrap or authorization check appears not to be working as expected for first-time setup.",
    "Admin dashboard still shows 'Access Denied' after Internet Identity login; suspected cause is missing backend authorization modules (e.g., authorization/MixinAuthorization and authorization/access-control), preventing first-admin bootstrap and causing isAdmin checks to always return false.",
    "Automated build/implementation attempts are failing with 'AI couldn't implement/struggled with your request', blocking deployment of the authorization fix.",
    "After deploying v5/live, admin dashboard still shows the same 'Access Denied' error (fix not effective yet).",
    "After deploying Version 6 (admin-with-access-code flow), the admin authorization/login still does not work; user reports it \"still not work\"."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-create-a-mobile-first-responsive-website-for-ini-abasi-restaurant-and-outdoor-services-with-a-consistent-global-layout-header-navigation-footer-and-client-side-routing-for-these-pages-home-menu-gallery-about-contact-and-order-reserve",
      "title": "Create a mobile-first, responsive website for “Ini-Abasi Restaurant and Outdoor Services” with a consistent global layout (header navigation + footer) and client-side routing for these pages: Home, Menu, Gallery, About, Contact, and Order/Reserve.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-the-requested-brand-styling-across-the-entire-site-warm-green-beige-and-red-accents-friendly-serif-headings-clean-sans-serif-body-text-with-an-overall-cohesive-culturally-inspired-visual-theme-e-g-subtle-textile-pattern-accents-warm-food-photography-framing-implemented-consistently",
      "title": "Apply the requested brand styling across the entire site: warm green, beige, and red accents; friendly serif headings; clean sans-serif body text; with an overall cohesive, culturally-inspired visual theme (e.g., subtle textile/pattern accents, warm food photography framing) implemented consistently.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-seo-foundations-for-a-react-spa-per-page-unique-title-and-meta-description-canonical-url-support-open-graph-twitter-card-tags-and-semantic-heading-structure-on-each-page-h1-h2",
      "title": "Implement SEO foundations for a React SPA: per-page unique title and meta description, canonical URL support, Open Graph + Twitter card tags, and semantic heading structure on each page (H1/H2).",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-optimize-for-google-maps-and-local-search-by-adding-a-dedicated-find-us-section-home-and-or-contact-that-embeds-google-maps-via-iframe-and-add-localbusiness-restaurant-structured-data-json-ld-with-nap-fields-name-address-phone-opening-hours-and-cuisine-service-keywords-relevant-to-african-and-continental-dishes-and-catering",
      "title": "Optimize for Google Maps and local search by adding a dedicated “Find Us” section (Home and/or Contact) that embeds Google Maps via iframe, and add LocalBusiness/Restaurant structured data (JSON-LD) with NAP fields (name, address, phone), opening hours, and cuisine/service keywords relevant to African and continental dishes and catering.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-build-the-home-page-content-to-highlight-african-dishes-continental-dishes-pastries-natural-drinks-and-event-catering-include-a-hero-section-featured-categories-and-clear-calls-to-action-to-menu-order-reserve-and-contact",
      "title": "Build the Home page content to highlight: African dishes, continental dishes, pastries, natural drinks, and event catering; include a hero section, featured categories, and clear calls-to-action to Menu, Order/Reserve, and Contact.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-menu-page-with-filterable-categories-african-dishes-continental-dishes-pastries-natural-drinks-catering-packages-using-a-structured-menu-dataset-stored-in-the-frontend-no-hardcoded-repeated-markup",
      "title": "Create a Menu page with filterable categories (African dishes, Continental dishes, Pastries, Natural drinks, Catering packages) using a structured menu dataset stored in the frontend (no hardcoded repeated markup).",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-gallery-page-that-displays-a-responsive-grid-of-images-with-accessible-alt-text-and-a-lightbox-modal-preview-for-viewing-images-larger",
      "title": "Create a Gallery page that displays a responsive grid of images with accessible alt text and a lightbox/modal preview for viewing images larger.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-create-an-about-page-describing-ini-abasi-restaurant-and-outdoor-services-emphasizing-cultural-traditional-cuisine-quality-ingredients-and-outdoor-event-service-capability-with-sections-for-mission-values-and-services",
      "title": "Create an About page describing Ini-Abasi Restaurant and Outdoor Services, emphasizing cultural/traditional cuisine, quality ingredients, and outdoor/event service capability, with sections for mission/values and services.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-create-a-contact-page-with-a-contact-form-name-phone-email-message-prominent-click-to-call-phone-link-and-email-link-and-a-clear-location-block-address-placeholders-plus-the-embedded-map",
      "title": "Create a Contact page with a contact form (name, phone/email, message), prominent click-to-call phone link and email link, and a clear location block (address placeholders) plus the embedded map.",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-create-an-order-reserve-page-that-supports-a-table-reservation-requests-and-b-catering-event-service-requests-each-with-its-own-form-and-appropriate-fields-date-time-party-size-event-type-location-notes-contact-info",
      "title": "Create an Order/Reserve page that supports (a) table reservation requests and (b) catering/event service requests, each with its own form and appropriate fields (date/time, party size, event type, location, notes, contact info).",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-connect-the-frontend-contact-and-order-reserve-forms-to-the-backend-using-react-query-mutations-including-loading-states-error-handling-and-user-friendly-success-feedback",
      "title": "Connect the frontend Contact and Order/Reserve forms to the backend using React Query mutations, including loading states, error handling, and user-friendly success feedback.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-add-static-seo-support-files-robots-txt-and-sitemap-xml-with-routes-for-home-menu-gallery-about-contact-order-reserve-and-ensure-they-are-served-as-static-assets-from-the-frontend",
      "title": "Add static SEO support files: robots.txt and sitemap.xml (with routes for Home, Menu, Gallery, About, Contact, Order/Reserve) and ensure they are served as static assets from the frontend.",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-add-and-render-required-generated-brand-images-as-static-assets-under-frontend-public-assets-generated-and-use-them-in-the-ui-logo-in-header-footer-hero-image-on-home-gallery-images-on-gallery",
      "title": "Add and render required generated brand images as static assets under frontend/public/assets/generated and use them in the UI (logo in header/footer, hero image on Home, gallery images on Gallery).",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-protected-super-admin-owner-area-dashboard-accessible-only-after-internet-identity-login-with-a-clear-unauthorized-state-for-non-owners",
      "title": "Add a protected SUPER-ADMIN / OWNER area (dashboard) accessible only after Internet Identity login, with a clear unauthorized state for non-owners.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-move-website-editable-content-and-settings-into-backend-managed-data-models-while-preserving-current-public-site-design-including-menu-categories-items-prices-gallery-items-metadata-opening-hours-location-nap-whatsapp-call-order-buttons-config-seo-metadata-titles-descriptions-keywords-promotions-banners-and-custom-pages-list",
      "title": "Move website-editable content and settings into backend-managed data models (while preserving current public-site design), including: menu categories/items/prices, gallery items/metadata, opening hours/location/NAP, WhatsApp/call/order buttons config, SEO metadata (titles/descriptions/keywords), promotions/banners, and custom pages list.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-build-an-admin-ui-for-managing-menu-categories-and-menu-items-including-price-edits-with-create-edit-delete-ordering-and-validation",
      "title": "Build an admin UI for managing menu categories and menu items (including price edits) with create/edit/delete, ordering, and validation.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-build-an-admin-ui-for-managing-the-gallery-add-edit-remove-reorder-gallery-entries-including-image-url-path-plus-alt-text-caption-and-category",
      "title": "Build an admin UI for managing the gallery (add/edit/remove/reorder gallery entries) including image URL/path plus alt text, caption, and category.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-build-an-admin-ui-for-editing-opening-hours-and-location-contact-settings-nap-and-ensure-all-public-references-update-accordingly-footer-contact-page-blocks-map-embed-structured-data",
      "title": "Build an admin UI for editing opening hours and location/contact settings (NAP) and ensure all public references update accordingly (footer, contact page blocks, map embed, structured data).",
      "reqIds": [
        "REQ-20"
      ],
      "version": 1
    },
    {
      "id": "feature-add-admin-controls-for-whatsapp-call-and-order-buttons-visibility-toggles-labels-and-target-links-phone-numbers-and-wire-the-public-site-to-use-these-settings-without-changing-the-current-public-design",
      "title": "Add admin controls for WhatsApp, call, and order buttons (visibility toggles, labels, and target links/phone numbers) and wire the public site to use these settings without changing the current public design.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-add-admin-seo-management-to-edit-per-page-meta-title-description-and-keywords-and-ensure-the-existing-seo-hook-uses-backend-managed-values",
      "title": "Add admin SEO management to edit per-page meta title, description, and keywords, and ensure the existing SEO hook uses backend-managed values.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-add-admin-page-management-to-add-or-remove-custom-pages-and-update-routing-navigation-to-render-these-pages-without-altering-the-existing-public-site-s-styling",
      "title": "Add admin page management to add or remove custom pages, and update routing/navigation to render these pages without altering the existing public site’s styling.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-add-admin-management-for-promotions-and-banners-with-enable-disable-scheduling-optional-and-ordering-and-render-them-on-the-public-site-in-a-way-that-does-not-change-the-existing-public-design-language",
      "title": "Add admin management for promotions and banners with enable/disable, scheduling (optional), and ordering, and render them on the public site in a way that does not change the existing public design language.",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-complete-export-backup-feature-for-the-owner-to-download-all-website-data-in-a-non-proprietary-format-and-provide-an-import-restore-option-to-prevent-vendor-lock-in",
      "title": "Implement a complete export/backup feature for the owner to download all website data in a non-proprietary format, and provide an import/restore option to prevent vendor lock-in.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-improve-the-admin-access-denied-experience-to-help-operators-recover-from-misconfigured-authorization-keep-the-existing-access-denied-copy-in-english-and-add-a-clear-sign-out-action-plus-a-retry-access-check-action-that-re-runs-the-admin-status-query-after-login",
      "title": "Improve the admin access denied experience to help operators recover from misconfigured authorization: keep the existing Access Denied copy in English, and add a clear “Sign out” action plus a “Retry access check” action that re-runs the admin status query after login.",
      "reqIds": [
        "REQ-29"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-all-user-facing-admin-access-denied-text-in-english-and-ensure-the-existing-frontend-admin-gating-continues-to-work-without-editing-any-immutable-frontend-hook-files-do-not-change-frontend-src-hooks-useinternetidentity-ts-x-or-frontend-src-hooks-useactor-ts-if-any-frontend-change-is-needed-implement-it-only-in-non-immutable-files-and-keep-the-current-ux-retry-access-check-sign-out-return-to-home",
      "title": "Keep all user-facing admin/access-denied text in English, and ensure the existing frontend admin gating continues to work without editing any immutable frontend hook files (do not change `frontend/src/hooks/useInternetIdentity.ts(x)` or `frontend/src/hooks/useActor.ts`). If any frontend change is needed, implement it only in non-immutable files and keep the current UX (Retry access check, Sign out, Return to Home).",
      "reqIds": [
        "REQ-38"
      ],
      "version": 1
    },
    {
      "id": "feature-add-an-admin-access-code-entry-ui-for-authenticated-users-so-they-can-enter-the-access-code-and-have-it-stored-under-the-key-caffeineadmintoken-in-sessionstorage-enabling-the-existing-useactor-initialization-getsecretparameter-caffeineadmintoken-without-editing-immutable-hook-files",
      "title": "Add an admin access-code entry UI for authenticated users so they can enter the access code and have it stored under the key `caffeineAdminToken` in `sessionStorage`, enabling the existing `useActor` initialization (`getSecretParameter('caffeineAdminToken')`) without editing immutable hook files.",
      "reqIds": [
        "REQ-40"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-all-user-facing-admin-auth-messaging-in-english-and-preserve-the-existing-admingate-ux-retry-access-check-sign-out-return-to-home-while-integrating-the-access-code-flow",
      "title": "Keep all user-facing admin/auth messaging in English and preserve the existing AdminGate UX (Retry access check, Sign out, Return to Home) while integrating the access-code flow.",
      "reqIds": [
        "REQ-41"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-all-user-facing-admin-auth-messaging-in-english-and-preserve-the-current-admin-gating-ux-retry-access-check-sign-out-return-to-home-and-the-access-code-entry-panel-without-editing-immutable-frontend-hook-files",
      "title": "Keep all user-facing admin/auth messaging in English and preserve the current admin gating UX (Retry access check, Sign out, Return to Home, and the access-code entry panel), without editing immutable frontend hook files.",
      "reqIds": [
        "REQ-45"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create mobile-first restaurant website with pages: Home, Menu, Gallery, About, Contact, and Order/Reserve",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Implement SEO optimization for local search, including Google Maps optimization",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Apply branding/theme: warm green, beige, and red accents; friendly serif headings with clean sans-serif body text",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Add content structure to highlight African & continental dishes, pastries, natural drinks, and event catering services",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-15",
      "summary": "Implement a Motoko backend to accept and persist Contact, Reservation, and Catering/Event submissions, with timestamped records and simple rate-limiting per caller (best-effort) to reduce spam.",
      "reqIds": [
        "REQ-11"
      ],
      "status": "pending"
    },
    {
      "id": "AR-16",
      "summary": "Build a SUPER-ADMIN/OWNER dashboard (no public-site design changes) with unrestricted owner permissions: manage menus/prices/categories, gallery/images, opening hours/location, WhatsApp/call/order buttons, SEO metadata/keywords, add/remove pages, promotions/banners, and export/backup all site data; ensure no vendor lock-in and owner cannot be locked out.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-18",
      "summary": "Implement owner (super-admin) authorization in the Motoko backend, including an initialization/recovery flow that ensures the restaurant owner cannot be permanently locked out of admin access.",
      "reqIds": [
        "REQ-16"
      ],
      "status": "pending"
    },
    {
      "id": "AR-28",
      "summary": "Add conditional Motoko stable storage + upgrade migration support for the new admin-managed data, preserving existing submissions features (contact, reservations, catering events) and ensuring upgrades do not wipe state.",
      "reqIds": [
        "REQ-26"
      ],
      "status": "pending"
    },
    {
      "id": "AR-29",
      "summary": "Fix the backend authorization bootstrap so that when no owner/admin exists yet, the first Internet Identity principal that accesses the admin authorization flow is automatically granted SUPER-ADMIN/owner permissions, so the admin dashboard does not show “Access Denied” for the first-time setup.",
      "reqIds": [
        "REQ-27"
      ],
      "status": "pending"
    },
    {
      "id": "AR-30",
      "summary": "Persist admin/owner authorization state across canister upgrades so the restaurant owner cannot be unintentionally locked out after a redeploy/upgrade; add conditional migration support if the stable authorization state schema changes.",
      "reqIds": [
        "REQ-28"
      ],
      "status": "pending"
    },
    {
      "id": "AR-31",
      "summary": "Remove the broken dependency on missing authorization modules by implementing the imported Motoko modules `authorization/MixinAuthorization` and `authorization/access-control` so `backend/main.mo` compiles without missing imports and provides the authorization behavior expected by the admin UI.",
      "reqIds": [
        "REQ-30"
      ],
      "status": "pending"
    },
    {
      "id": "AR-32",
      "summary": "Implement a deterministic owner/admin bootstrap rule in the backend: when no owner/admin exists yet, the first authenticated Internet Identity principal that enters the admin authorization flow is automatically granted SUPER-ADMIN/owner permissions and the basic `#user` permission needed for profile actions.",
      "reqIds": [
        "REQ-31"
      ],
      "status": "pending"
    },
    {
      "id": "AR-33",
      "summary": "Persist the owner/admin authorization state across canister upgrades using stable storage, including the bootstrap result, so the owner cannot be unintentionally locked out after redeploy/upgrade.",
      "reqIds": [
        "REQ-32"
      ],
      "status": "pending"
    },
    {
      "id": "AR-34",
      "summary": "Ensure the backend exposes and wires the exact admin status API used by the frontend (`actor.isCallerAdmin()`), and that it performs the bootstrap logic as needed (update call if mutation is required), so `frontend/src/hooks/useAdminStatus.ts` can correctly determine admin status.",
      "reqIds": [
        "REQ-33"
      ],
      "status": "pending"
    },
    {
      "id": "AR-35",
      "summary": "Create the missing Motoko authorization modules referenced by `backend/main.mo` so the backend compiles: add `backend/authorization/MixinAuthorization.mo` and `backend/authorization/access-control.mo` (matching the exact import paths `authorization/MixinAuthorization` and `authorization/access-control`).",
      "reqIds": [
        "REQ-34"
      ],
      "status": "pending"
    },
    {
      "id": "AR-36",
      "summary": "Implement a deterministic owner/admin bootstrap in the new `authorization/access-control.mo` module: when no owner/admin exists yet, the first authenticated Internet Identity principal that hits the admin authorization flow is automatically set as the owner/admin and also granted the `#user` permission required for profile actions.",
      "reqIds": [
        "REQ-35"
      ],
      "status": "pending"
    },
    {
      "id": "AR-37",
      "summary": "Persist authorization state across canister upgrades using stable storage (owner/admin and any permission mappings needed by the admin UI), and add conditional migration support only if required by the current project state (do not add `backend/migration.mo` unless upgrading existing stable state schema).",
      "reqIds": [
        "REQ-36"
      ],
      "status": "pending"
    },
    {
      "id": "AR-38",
      "summary": "Expose and wire the exact backend methods expected by the existing frontend admin flow: `isCallerAdmin()` (used by `frontend/src/hooks/useAdminStatus.ts`) and `_initializeAccessControlWithSecret(adminToken)` (called from `frontend/src/hooks/useActor.ts`). These methods must work together to enable first-time admin bootstrap and subsequent admin checks.",
      "reqIds": [
        "REQ-37"
      ],
      "status": "pending"
    },
    {
      "id": "AR-39",
      "summary": "Add an access-code (admin token) based admin initialization flow so a principal can become SUPER-ADMIN/owner only by providing the correct access code/secret (instead of automatically granting the first logged-in principal), leveraging the existing `_initializeAccessControlWithSecret(adminToken)` mechanism.",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-40",
      "summary": "Implement/repair backend admin authorization so that a logged-in Internet Identity principal becomes an admin only after successfully initializing with the access code secret \"01622610\", using the existing `_initializeAccessControlWithSecret(adminToken)` flow and ensuring `isCallerAdmin()` correctly reflects the resulting admin status.",
      "reqIds": [
        "REQ-39"
      ],
      "status": "pending"
    },
    {
      "id": "AR-41",
      "summary": "Implement/repair backend admin authorization so the frontend’s existing access-code flow can successfully grant admin access when the correct access code is provided, and deny access otherwise.",
      "reqIds": [
        "REQ-42"
      ],
      "status": "pending"
    },
    {
      "id": "AR-42",
      "summary": "Ensure the backend method `_initializeAccessControlWithSecret(adminToken)` is safe to call during actor initialization even when the token is missing/empty/invalid, so the frontend actor creation path never fails due to a trap from this method.",
      "reqIds": [
        "REQ-43"
      ],
      "status": "pending"
    },
    {
      "id": "AR-43",
      "summary": "Expose and wire the exact admin status API expected by the existing frontend (`isCallerAdmin()`), and ensure it reflects the backend’s stored admin authorization state produced by the access-code initialization flow.",
      "reqIds": [
        "REQ-44"
      ],
      "status": "pending"
    }
  ],
  "projectName": "Ini-Abasi Restaurant and Outdoor Services",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}